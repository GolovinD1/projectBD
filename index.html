<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–æ–ª–ª–µ–∫—Ü–∏—è –≤–∏–¥–µ–æ–∏–≥—Ä</title>
    <link rel="stylesheet" href="static/css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>üéÆ –ö–æ–ª–ª–µ–∫—Ü–∏—è –≤–∏–¥–µ–æ–∏–≥—Ä</h1>
            <nav id="user-nav">
                <span id="user-info"></span>
                <button onclick="showSection('my-games-section')">–ú–æ—è –∫–æ–ª–ª–µ–∫—Ü–∏—è</button>
                <button onclick="showSection('statistics-section')">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</button>
                <button onclick="showSection('recommendations-section')">–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</button>
                <button onclick="showSection('games-section')">–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∏–≥—Ä</button>
                <button onclick="logout()">–í—ã—Ö–æ–¥</button>
            </nav>
        </header>

        <!-- –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞ -->
        <div id="login-section" class="card">
            <h2>–í—Ö–æ–¥</h2>
            <div class="form-group">
                <label for="login-username">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:</label>
                <input type="text" id="login-username" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è">
            </div>
            <div class="form-group">
                <label for="login-password">–ü–∞—Ä–æ–ª—å:</label>
                <input type="password" id="login-password" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
            </div>
            <button class="btn" onclick="login()">–í–æ–π—Ç–∏</button>
            <p style="margin-top: 15px;">
                –ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? <a href="#" onclick="showRegister(); return false;">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</a>
            </p>
        </div>

        <!-- –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
        <div id="register-section" class="card hidden">
            <h2>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>
            <div class="form-group">
                <label for="reg-username">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:</label>
                <input type="text" id="reg-username" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è">
            </div>
            <div class="form-group">
                <label for="reg-email">Email:</label>
                <input type="email" id="reg-email" placeholder="–í–≤–µ–¥–∏—Ç–µ email">
            </div>
            <div class="form-group">
                <label for="reg-password">–ü–∞—Ä–æ–ª—å:</label>
                <input type="password" id="reg-password" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
            </div>
            <button class="btn" onclick="register()">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
            <p style="margin-top: 15px;">
                –£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? <a href="#" onclick="showLogin(); return false;">–í–æ–π—Ç–∏</a>
            </p>
        </div>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç (–¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π) -->
        <div id="main-section" class="hidden">
            <!-- –ú–æ—è –∫–æ–ª–ª–µ–∫—Ü–∏—è -->
            <div id="my-games-section" class="section card">
                <h2>–ú–æ—è –∫–æ–ª–ª–µ–∫—Ü–∏—è –∏–≥—Ä</h2>
                <div id="my-games-container" class="games-grid"></div>
            </div>

            <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
            <div id="statistics-section" class="section card hidden">
                <h2>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3 id="total-games">0</h3>
                        <p>–í—Å–µ–≥–æ –∏–≥—Ä</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="total-hours">0</h3>
                        <p>–ß–∞—Å–æ–≤ –Ω–∞–∏–≥—Ä–∞–Ω–æ</p>
                    </div>
                </div>
                <div class="genre-stats">
                    <h3 style="margin-bottom: 15px;">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∂–∞–Ω—Ä–∞–º:</h3>
                    <div id="genre-stats"></div>
                    <p style="margin-top: 15px;">
                        <strong>–ü—Ä–µ–æ–±–ª–∞–¥–∞—é—â–∏–π –∂–∞–Ω—Ä:</strong> 
                        <span id="predominant-genre">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö</span>
                    </p>
                </div>
            </div>

            <!-- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ -->
            <div id="recommendations-section" class="section card hidden">
                <h2>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –≤–∞—Å</h2>
                <p>–ù–∞ –æ—Å–Ω–æ–≤–µ –≤–∞—à–µ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –º—ã —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º —Å–ª–µ–¥—É—é—â–∏–µ –∏–≥—Ä—ã:</p>
                <div id="recommendations-container" class="games-grid"></div>
            </div>

            <!-- –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∏–≥—Ä -->
            <div id="games-section" class="section card hidden">
                <h2>–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∏–≥—Ä</h2>
                <p>–í—ã–±–µ—Ä–∏—Ç–µ –∏–≥—Ä—ã –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –≤–∞—à—É –∫–æ–ª–ª–µ–∫—Ü–∏—é:</p>
                <div id="games-container" class="games-grid"></div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏–≥—Ä—ã -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeEditModal()">&times;</span>
            <h2>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–≥—Ä—É</h2>
            <input type="hidden" id="edit-game-id">
            <div class="form-group">
                <label for="edit-hours">–ß–∞—Å–æ–≤ –Ω–∞–∏–≥—Ä–∞–Ω–æ:</label>
                <input type="number" id="edit-hours" step="0.1" min="0">
            </div>
            <div class="form-group">
                <label for="edit-status">–°—Ç–∞—Ç—É—Å:</label>
                <select id="edit-status">
                    <option value="owned">–í –∫–æ–ª–ª–µ–∫—Ü–∏–∏</option>
                    <option value="playing">–ò–≥—Ä–∞—é</option>
                    <option value="completed">–ü—Ä–æ–π–¥–µ–Ω–æ</option>
                    <option value="wishlist">–•–æ—á—É</option>
                </select>
            </div>
            <button class="btn btn-success" onclick="saveGameChanges()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            <button class="btn btn-secondary" onclick="closeEditModal()">–û—Ç–º–µ–Ω–∞</button>
        </div>
    </div>

    <script src="static/js/app.js"></script>
</body>
</html>

